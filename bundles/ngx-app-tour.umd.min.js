!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/animations"),require("@angular/cdk/coercion"),require("@angular/cdk/keycodes"),require("@angular/router"),require("rxjs"),require("withinviewport"),require("rxjs/operators"),require("@angular/cdk/overlay"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-app-tour",["exports","@angular/animations","@angular/cdk/coercion","@angular/cdk/keycodes","@angular/router","rxjs","withinviewport","rxjs/operators","@angular/cdk/overlay","@angular/common","@angular/core"],t):t(e["ngx-app-tour"]={},e.ng.animations,e.ng.cdk.coercion,e.ng.cdk.keycodes,e.ng.router,e.rxjs,e.withinviewport,e.rxjs.operators,e.ng.cdk.overlay,e.ng.common,e.ng.core)}(this,function(e,t,i,n,r,o,s,a,p,l,c){"use strict";s=s&&s.hasOwnProperty("default")?s["default"]:s;var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function h(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var m=function(){return(m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function b(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}var v=t.trigger("fadeAnimation",[t.state("void",t.style({opacity:0})),t.state("true",t.style({opacity:1})),t.state("false",t.style({opacity:0})),t.transition("* => true",t.animate("150ms cubic-bezier(0.0, 0.0, 0.2, 1)")),t.transition("* => void",t.animate("150ms cubic-bezier(0.4, 0.0, 1, 1)"))]);function f(e){return null!=e}new(function(){function e(){this.counter=0,this.lastClickPos={x:0,y:0},this._navItemSource=new c.EventEmitter,this._observeGlobalEvents()}return e.prototype.getGlobalCount=function(){return++this.counter},e.prototype.setDocumentOverflowHidden=function(e){document.body.style.overflow=e?"hidden":""},e.prototype._observeGlobalEvents=function(){var t=this;document.addEventListener("click",function(e){t.lastClickPos={x:e.clientX,y:e.clientY},t._navItemSource.emit("documentClick")})},e}());"undefined"!=typeof window&&window.mozInnerScreenX;var y=["moz","ms","webkit"];(function j(){if("undefined"==typeof window)return function(){return null};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);var e=y.filter(function(e){return e+"RequestAnimationFrame"in window})[0];return e?window[e+"RequestAnimationFrame"]:function t(){var r=0;return function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=window.setTimeout(function(){e(t+n)},n);return r=t+n,i}}()})();var g={top:{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"},topCenter:{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"},topLeft:{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},topRight:{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},right:{originX:"end",originY:"center",overlayX:"start",overlayY:"center"},rightTop:{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},rightBottom:{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},bottom:{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"},bottomCenter:{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"},bottomLeft:{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},bottomRight:{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},left:{originX:"start",originY:"center",overlayX:"end",overlayY:"center"},leftTop:{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},leftBottom:{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}},w=C([g.top,g.right,g.bottom,g.left]);C([g.bottomLeft,g.topLeft]);function S(t,e){return function o(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}(e,function(e){return t[e]})}function C(e){return null==e?[]:S(e,Object.keys(e))}var O=function(){function e(e){this.cdr=e,this._hasBackdrop=!1,this._prefix="ant-tooltip-placement",this._positions=function n(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}(w),this._classMap={},this._placement="top",this._trigger="hover",this.visibleSource=new o.BehaviorSubject(!1),this.visible$=this.visibleSource.asObservable(),this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzMouseEnterDelay=.15,this.nzMouseLeaveDelay=.1,this.nzVisibleChange=new c.EventEmitter}return Object.defineProperty(e.prototype,"nzVisible",{get:function(){return this.visibleSource.value},set:function(e){var t=function n(e){return i.coerceBooleanProperty(e)}(e);this.visibleSource.value!==t&&(this.visibleSource.next(t),this.nzVisibleChange.emit(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nzTrigger",{get:function(){return this._trigger},set:function(e){this._trigger=e,this._hasBackdrop="click"===this._trigger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nzPlacement",{get:function(){return this._placement},set:function(e){e!==this._placement&&(this._placement=e,this._positions.unshift(g[this.nzPlacement]))},enumerable:!0,configurable:!0}),e.prototype.updatePosition=function(){this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()},e.prototype.onPositionChange=function(e){for(var t in g)if(JSON.stringify(e.connectionPair)===JSON.stringify(g[t])){this.nzPlacement=t;break}this.setClassMap(),this.cdr.detectChanges()},e.prototype.show=function(){this.isContentEmpty()||(this.nzVisible=!0)},e.prototype.hide=function(){this.nzVisible=!1},e.prototype._afterVisibilityAnimation=function(e){"false"!==e.toState||this.nzVisible||this.nzVisibleChange.emit(!1),"true"===e.toState&&this.nzVisible&&this.nzVisibleChange.emit(!0)},e.prototype.setClassMap=function(){var e;this._classMap=((e={})[this.nzOverlayClassName]=!0,e[this._prefix+"-"+this._placement]=!0,e)},e.prototype.setOverlayOrigin=function(e){this.overlayOrigin=e},e.prototype.isContentEmpty=function(){return!(this.nzTitle instanceof c.TemplateRef)&&(""===this.nzTitle||!f(this.nzTitle))},e.decorators=[{type:c.Component,args:[{changeDetection:c.ChangeDetectionStrategy.OnPush,encapsulation:c.ViewEncapsulation.None,selector:"nz-tooltip",animations:[v],template:'<ng-content></ng-content>\n<ng-template\n  #overlay="cdkConnectedOverlay"\n  cdkConnectedOverlay\n  [cdkConnectedOverlayOrigin]="overlayOrigin"\n  [cdkConnectedOverlayOpen]="visible$ | async"\n  [cdkConnectedOverlayHasBackdrop]="_hasBackdrop"\n  [cdkConnectedOverlayPositions]="_positions"\n  (backdropClick)="hide()"\n  (detach)="hide()"\n  (positionChange)="onPositionChange($event)">\n  <div\n    class="ant-tooltip"\n    [ngClass]="_classMap"\n    [ngStyle]="nzOverlayStyle"\n    [@fadeAnimation]="\'\'+(visible$ | async)"\n    (@fadeAnimation.done)="_afterVisibilityAnimation($event)">\n    <div class="ant-tooltip-content">\n      <div class="ant-tooltip-arrow"></div>\n      <div class="ant-tooltip-inner">\n        <ng-container *nzStringTemplateOutlet="nzTitle">{{ nzTitle }}</ng-container>\n      </div>\n    </div>\n  </div>\n</ng-template>',preserveWhitespaces:!1,styles:["\n    .ant-tooltip {\n      position: relative;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:c.ChangeDetectorRef}]},e.propDecorators={overlay:[{type:c.ViewChild,args:["overlay"]}],nzTitle:[{type:c.Input},{type:c.ContentChild,args:["nzTemplate"]}],nzOverlayClassName:[{type:c.Input}],nzOverlayStyle:[{type:c.Input}],nzMouseEnterDelay:[{type:c.Input}],nzMouseLeaveDelay:[{type:c.Input}],nzVisibleChange:[{type:c.Output}],nzVisible:[{type:c.Input}],nzTrigger:[{type:c.Input}],nzPlacement:[{type:c.Input}]},e}(),x=function(n){function e(e){var t=n.call(this,e)||this;return t._prefix="ant-popover-placement",t}return h(e,n),e.prototype.isContentEmpty=function(){var e=!(this.nzTitle instanceof c.TemplateRef)&&(""===this.nzTitle||!f(this.nzTitle)),t=!(this.nzContent instanceof c.TemplateRef)&&(""===this.nzContent||!f(this.nzContent));return e&&t},e.decorators=[{type:c.Component,args:[{selector:"nz-popover",animations:[v],template:'<ng-content></ng-content>\n<ng-template\n  #overlay="cdkConnectedOverlay"\n  cdkConnectedOverlay\n  [cdkConnectedOverlayOrigin]="overlayOrigin"\n  [cdkConnectedOverlayHasBackdrop]="_hasBackdrop"\n  (backdropClick)="hide()"\n  (detach)="hide()"\n  (positionChange)="onPositionChange($event)"\n  [cdkConnectedOverlayPositions]="_positions"\n  [cdkConnectedOverlayOpen]="visible$ | async">\n  <div class="ant-popover" [ngClass]="_classMap" [ngStyle]="nzOverlayStyle" [@fadeAnimation]="\'\'+(visible$ | async)"\n    (@fadeAnimation.done)="_afterVisibilityAnimation($event)">\n    <div class="ant-popover-content">\n      <div class="ant-popover-arrow"></div>\n      <div class="ant-popover-inner">\n        <div class="ant-popover-title" *ngIf="nzTitle">\n          <ng-container *nzStringTemplateOutlet="nzTitle">{{ nzTitle }}</ng-container>\n        </div>\n        <div class="ant-popover-inner-content">\n          <ng-container *nzStringTemplateOutlet="nzContent">{{ nzContent }}</ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>',changeDetection:c.ChangeDetectionStrategy.OnPush,encapsulation:c.ViewEncapsulation.None,preserveWhitespaces:!1,styles:["\n    .ant-popover {\n      position: relative;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:c.ChangeDetectorRef}]},e.propDecorators={nzTitle:[{type:c.Input},{type:c.ContentChild,args:["neverUsedTemplate"]}],nzContent:[{type:c.Input},{type:c.ContentChild,args:["nzTemplate"]}]},e}(O),z=function(){function e(e,t,n,i,r){this.elementRef=e,this.hostView=t,this.resolver=n,this.renderer=i,this.tooltip=r,this.isTooltipOpen=!1,this.isDynamicTooltip=!1,this.factory=this.resolver.resolveComponentFactory(O),this.needProxyProperties=["nzTitle","nzContent","nzOverlayClassName","nzOverlayStyle","nzMouseEnterDelay","nzMouseLeaveDelay","nzVisible","nzTrigger","nzPlacement"],this.subs_=new o.Subscription,this.nzVisibleChange=new c.EventEmitter}return Object.defineProperty(e.prototype,"setTitle",{set:function(e){this.nzTitle=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateProxies(e)},e.prototype.ngOnInit=function(){var t=this;if(!this.tooltip){var e=this.hostView.createComponent(this.factory);this.tooltip=e.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),e.location.nativeElement),this.isDynamicTooltip=!0,this.needProxyProperties.forEach(function(e){return t.updateCompValue(e,t[e])});var n=this.tooltip.nzVisibleChange.pipe(a.distinctUntilChanged()).subscribe(function(e){t.visible=e,t.nzVisibleChange.emit(e)});this.subs_.add(n)}this.tooltip.setOverlayOrigin(this)},e.prototype.ngAfterViewInit=function(){var e,t=this;"hover"===this.tooltip.nzTrigger?(this.renderer.listen(this.elementRef.nativeElement,"mouseenter",function(){return t.delayEnterLeave(!0,!0,t.tooltip.nzMouseEnterDelay)}),this.renderer.listen(this.elementRef.nativeElement,"mouseleave",function(){t.delayEnterLeave(!0,!1,t.tooltip.nzMouseLeaveDelay),t.tooltip.overlay.overlayRef&&!e&&(e=t.tooltip.overlay.overlayRef.overlayElement,t.renderer.listen(e,"mouseenter",function(){return t.delayEnterLeave(!1,!0)}),t.renderer.listen(e,"mouseleave",function(){return t.delayEnterLeave(!1,!1)}))})):"focus"===this.tooltip.nzTrigger?(this.renderer.listen(this.elementRef.nativeElement,"focus",function(){return t.show()}),this.renderer.listen(this.elementRef.nativeElement,"blur",function(){return t.hide()})):"click"===this.tooltip.nzTrigger&&this.renderer.listen(this.elementRef.nativeElement,"click",function(e){e.preventDefault(),t.show()})},e.prototype.ngOnDestroy=function(){this.subs_.unsubscribe()},e.prototype.updateCompValue=function(e,t){this.isDynamicTooltip&&f(t)&&(this.tooltip[e]=t)},e.prototype.show=function(){this.tooltip.show(),this.isTooltipOpen=!0},e.prototype.hide=function(){this.tooltip.hide(),this.isTooltipOpen=!1},e.prototype.delayEnterLeave=function(e,t,n){var i=this;void 0===n&&(n=-1),this.delayTimer?(window.clearTimeout(this.delayTimer),this.delayTimer=null):0<n?this.delayTimer=window.setTimeout(function(){i.delayTimer=null,t?i.show():i.hide()},1e3*n):t&&e?this.show():this.hide()},e.prototype.updateProxies=function(n){var i=this;this.tooltip&&Object.keys(n).forEach(function(e){var t=n[e];t&&i.updateCompValue(e,t.currentValue)})},e.decorators=[{type:c.Directive,args:[{selector:"[nz-tooltip]",host:{"[class.ant-tooltip-open]":"isTooltipOpen"}}]}],e.ctorParameters=function(){return[{type:c.ElementRef},{type:c.ViewContainerRef},{type:c.ComponentFactoryResolver},{type:c.Renderer2},{type:O,decorators:[{type:c.Optional}]}]},e.propDecorators={nzVisibleChange:[{type:c.Output}],nzTitle:[{type:c.Input,args:["nz-tooltip"]}],setTitle:[{type:c.Input,args:["nzTitle"]}],nzContent:[{type:c.Input}],nzMouseEnterDelay:[{type:c.Input}],nzMouseLeaveDelay:[{type:c.Input}],nzOverlayClassName:[{type:c.Input}],nzOverlayStyle:[{type:c.Input}],nzTrigger:[{type:c.Input}],nzVisible:[{type:c.Input}],nzPlacement:[{type:c.Input}]},e}(),T=function(s){function e(e,t,n,i,r){var o=s.call(this,e,t,n,i,r)||this;return o.factory=o.resolver.resolveComponentFactory(x),o}return h(e,s),e.decorators=[{type:c.Directive,args:[{selector:"[nz-popover]",host:{"[class.ant-popover-open]":"isTooltipOpen"}}]}],e.ctorParameters=function(){return[{type:c.ElementRef},{type:c.ViewContainerRef},{type:c.ComponentFactoryResolver},{type:c.Renderer2},{type:x,decorators:[{type:c.Optional}]}]},e}(z),k=function(){function e(e,t){this.elementRef=e,this.renderer=t,this.classList=[]}return Object.defineProperty(e.prototype,"nzClassListAdd",{set:function(e){var t=this;this.classList.forEach(function(e){t.renderer.removeClass(t.elementRef.nativeElement,e)}),e.forEach(function(e){t.renderer.addClass(t.elementRef.nativeElement,e)}),this.classList=e},enumerable:!0,configurable:!0}),e.decorators=[{type:c.Directive,args:[{selector:"[nzClassListAdd]"}]}],e.ctorParameters=function(){return[{type:c.ElementRef},{type:c.Renderer2}]},e.propDecorators={nzClassListAdd:[{type:c.Input}]},e}(),E=function(){function e(e,t){this.viewContainer=e,this.defaultTemplate=t,this.inputTemplate=null,this.inputViewRef=null,this.defaultViewRef=null}return Object.defineProperty(e.prototype,"nzStringTemplateOutlet",{set:function(e){e instanceof c.TemplateRef?(this.isTemplate=!0,this.inputTemplate=e):this.isTemplate=!1,this.updateView()},enumerable:!0,configurable:!0}),e.prototype.updateView=function(){this.isTemplate?this.inputViewRef||(this.viewContainer.clear(),this.defaultViewRef=null,this.inputTemplate&&(this.inputViewRef=this.viewContainer.createEmbeddedView(this.inputTemplate))):this.defaultViewRef||(this.viewContainer.clear(),this.inputViewRef=null,this.defaultTemplate&&(this.defaultViewRef=this.viewContainer.createEmbeddedView(this.defaultTemplate)))},e.decorators=[{type:c.Directive,args:[{selector:"[nzStringTemplateOutlet]"}]}],e.ctorParameters=function(){return[{type:c.ViewContainerRef},{type:c.TemplateRef}]},e.propDecorators={nzStringTemplateOutlet:[{type:c.Input}]},e}(),R=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[l.CommonModule],exports:[E,k],declarations:[E,k]}]}],e}(),P=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{entryComponents:[x],exports:[T,x],declarations:[T,x],imports:[l.CommonModule,p.OverlayModule,R]}]}],e}(),_={OFF:0,ON:1,PAUSED:2};_[_.OFF]="OFF",_[_.ON]="ON",_[_.PAUSED]="PAUSED";var V=function(){function e(e){this.router=e,this.stepShow$=new o.Subject,this.stepHide$=new o.Subject,this.initialize$=new o.Subject,this.start$=new o.Subject,this.end$=new o.Subject,this.pause$=new o.Subject,this.resume$=new o.Subject,this.anchorRegister$=new o.Subject,this.anchorUnregister$=new o.Subject,this.events$=o.merge(this.stepShow$.pipe(a.map(function(e){return{name:"stepShow",value:e}})),this.stepHide$.pipe(a.map(function(e){return{name:"stepHide",value:e}})),this.initialize$.pipe(a.map(function(e){return{name:"initialize",value:e}})),this.start$.pipe(a.map(function(e){return{name:"start",value:e}})),this.end$.pipe(a.map(function(e){return{name:"end",value:e}})),this.pause$.pipe(a.map(function(e){return{name:"pause",value:e}})),this.resume$.pipe(a.map(function(e){return{name:"resume",value:e}})),this.anchorRegister$.pipe(a.map(function(e){return{name:"anchorRegister",value:e}})),this.anchorUnregister$.pipe(a.map(function(e){return{name:"anchorUnregister",value:e}}))),this.steps=[],this.anchors={},this.status=_.OFF}return e.prototype.initialize=function(e,t){e&&0<e.length&&(this.status=_.OFF,this.steps=e.map(function(e){return Object.assign({},t,e)}),this.initialize$.next(this.steps))},e.prototype.start=function(){this.startAt(0)},e.prototype.startAt=function(e){var t=this;this.status=_.ON,this.goToStep(this.loadStep(e)),this.start$.next(),this.router.events.pipe(a.filter(function(e){return e instanceof r.NavigationStart}),a.first()).subscribe(function(){t.currentStep&&t.hideStep(t.currentStep)})},e.prototype.end=function(){this.status=_.OFF,this.hideStep(this.currentStep),this.currentStep=undefined,this.end$.next()},e.prototype.pause=function(){this.status=_.PAUSED,this.hideStep(this.currentStep),this.pause$.next()},e.prototype.resume=function(){this.status=_.ON,this.showStep(this.currentStep),this.resume$.next()},e.prototype.toggle=function(e){e?this.currentStep?this.pause():this.resume():this.currentStep?this.end():this.start()},e.prototype.next=function(){this.hasNext(this.currentStep)&&this.goToStep(this.loadStep(this.currentStep.nextStep||this.steps.indexOf(this.currentStep)+1))},e.prototype.hasNext=function(e){return e?e.nextStep!==undefined||this.steps.indexOf(e)<this.steps.length-1:(console.warn("Can't get next step. No currentStep."),!1)},e.prototype.prev=function(){this.hasPrev(this.currentStep)&&this.goToStep(this.loadStep(this.currentStep.prevStep||this.steps.indexOf(this.currentStep)-1))},e.prototype.hasPrev=function(e){return e?e.prevStep!==undefined||0<this.steps.indexOf(e):(console.warn("Can't get previous step. No currentStep."),!1)},e.prototype["goto"]=function(e){this.goToStep(this.loadStep(e))},e.prototype.register=function(e,t){if(this.anchors[e])throw new Error("anchorId "+e+" already registered!");this.anchors[e]=t,this.anchorRegister$.next(e)},e.prototype.unregister=function(e){delete this.anchors[e],this.anchorUnregister$.next(e)},e.prototype.getStatus=function(){return this.status},e.prototype.goToStep=function(t){var n=this;if(!t)return console.warn("Can't go to non-existent step"),void this.end();var e=new Promise(function(e){return e(!0)});t.route!==undefined&&"string"==typeof t.route?e=this.router.navigateByUrl(t.route):t.route&&Array.isArray(t.route)&&(e=this.router.navigate(t.route)),e.then(function(e){!1!==e&&setTimeout(function(){return n.setCurrentStep(t)})})},e.prototype.loadStep=function(t){return"number"==typeof t?this.steps[t]:this.steps.find(function(e){return e.stepId===t})},e.prototype.setCurrentStep=function(e){var t=this;this.currentStep&&this.hideStep(this.currentStep),setTimeout(function(){t.currentStep=e,t.showStep(t.currentStep),t.router.events.pipe(a.filter(function(e){return e instanceof r.NavigationStart}),a.first()).subscribe(function(){t.currentStep&&t.hideStep(t.currentStep)})},this.currentStep?200:0)},e.prototype.showStep=function(e,t){var n=this;void 0===t&&(t=0);var i=this.anchors[e&&e.anchorId];i?(i.showTourStep(e),this.stepShow$.next(e)):20===t?(console.warn("Can't attach to unregistered anchor with id "+e.anchorId),this.end()):setTimeout(function(){return n.showStep(e,t++)},100)},e.prototype.hideStep=function(e){var t=this.anchors[e&&e.anchorId];t&&(t.hideTourStep(),this.stepHide$.next(e))},e.decorators=[{type:c.Injectable}],e.ctorParameters=function(){return[{type:r.Router}]},e}(),I=function(i){function e(e,t){var n=i.call(this,t)||this;return n.tourService=e,n.cdr=t,n._hasBackdrop=!0,n.step={},n.closed$=new c.EventEmitter,n.closeSubscription=n.nzVisibleChange.subscribe(function(e){e||n.closed$.emit()}),n}return h(e,i),e.prototype.ngOnDestroy=function(){this.closeSubscription.unsubscribe()},e.prototype.onEscapeKey=function(){this.tourService.getStatus()===_.ON&&this.tourService.end()},e.prototype.onArrowRightKey=function(){this.tourService.getStatus()===_.ON&&this.tourService.hasNext(this.tourService.currentStep)&&this.tourService.next()},e.prototype.onArrowLeftKey=function(){this.tourService.getStatus()===_.ON&&this.tourService.hasPrev(this.tourService.currentStep)&&this.tourService.prev()},e.decorators=[{type:c.Component,args:[{selector:"ngx-tour-step",template:'<ng-template\n        cdkConnectedOverlay\n        [cdkConnectedOverlayOrigin]="overlayOrigin"\n        [cdkConnectedOverlayHasBackdrop]="_hasBackdrop"\n        (backdropClick)="hide()"\n        (detach)="hide()"\n        (positionChange)="onPositionChange($event)"\n        [cdkConnectedOverlayPositions]="_positions"\n        [cdkConnectedOverlayOpen]="visible$ | async">\n    <div class="ant-popover" [ngClass]="_classMap" [ngStyle]="nzOverlayStyle" [@fadeAnimation]="\'\'+(visible$ | async)"\n         (@fadeAnimation.done)="_afterVisibilityAnimation($event)">\n        <div class="ant-popover-content">\n            <div class="ant-popover-arrow"></div>\n            <div class="ant-popover-inner">\n                <ng-container *ngTemplateOutlet="stepTemplate || defaultTemplate; context: { step: step }"></ng-container>\n            </div>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #defaultTemplate let-step="step">\n    <div class="step-container" (click)="$event.stopPropagation()">\n        <div *ngIf="step?.title" class="step-title">\n            {{ step?.title }}\n        </div>\n        <div class="step-content">\n            {{ step?.content }}\n        </div>\n        <div class="step-actions">\n            <button class="step-btn" [disabled]="!tourService.hasPrev(step)" (click)="tourService.prev()">\n                <svg class="icon-btn" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"\n                     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"\n                     y="0px"\n                     viewBox="0 0 477.175 477.175" style="enable-background:new 0 0 477.175 477.175;"\n                     xml:space="preserve">\n<g>\n\t<path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225\n\t\tc2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n                    <g>\n</g>\n</svg>\n            </button>\n            <button class="step-btn" [disabled]="!tourService.hasNext(step) || step.nextOn" (click)="tourService.next()">\n                <svg class="icon-btn" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129"\n                     xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 129 129">\n                    <g>\n                        <path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/>\n                    </g>\n                </svg>\n            </button>\n            <button class="step-btn" (click)="tourService.end()">{{ step?.endBtnTitle }}</button>\n        </div>\n    </div>\n</ng-template>\n',animations:[v]}]}],e.ctorParameters=function(){return[{type:V},{type:c.ChangeDetectorRef}]},e.propDecorators={onEscapeKey:[{type:c.HostListener,args:["window:keydown.Escape"]}],onArrowRightKey:[{type:c.HostListener,args:["window:keydown.ArrowRight"]}],onArrowLeftKey:[{type:c.HostListener,args:["window:keydown.ArrowLeft"]}]},e}(x),$=function(){function e(e){this.renderer=e.createRenderer(null,null)}return e.prototype.show=function(e,t,n){var i,r,o=e.nativeElement.getBoundingClientRect();if(!this.backdropElement){this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement);var s={position:"fixed","z-index":"100"};try{for(var a=b(Object.keys(s)),p=a.next();!p.done;p=a.next()){var l=p.value;this.renderer.setStyle(this.backdropElement,l,s[l])}}catch(c){i={error:c}}finally{try{p&&!p.done&&(r=a["return"])&&r.call(a)}finally{if(i)throw i.error}}}this.setStyles(o,t,n)},e.prototype.close=function(){this.backdropElement&&(this.renderer.removeChild(document.body,this.backdropElement),this.backdropElement=null)},e.prototype.setStyles=function(e,t,n){var i,r,o={"box-shadow":"0 0 0 1999px "+(n||"rgba(0, 0, 0, 0.7)"),"border-radius":t||"100%"};if(this.currentBoundingRect)if(this.backdropElement.animate){var s=this.currentBoundingRect.height+"px",a=this.currentBoundingRect.width+"px",p=this.currentBoundingRect.top+"px",l=this.currentBoundingRect.left+"px",c=e.height+"px",u=e.width+"px",h=e.top+"px",d=e.left+"px";this.backdropElement.animate([{height:s,width:a,top:p,left:l},{height:c,width:u,top:h,left:d}],{duration:200,easing:"ease-in-out",fill:"forwards"})}else o=m({},o,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",transition:"width 200ms ease-in-out,height 200ms ease-in-out,top 200ms ease-in-out,left 200ms ease-in-out"});else o=m({},o,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px"});this.currentBoundingRect=e;try{for(var v=b(Object.keys(o)),f=v.next();!f.done;f=v.next()){var y=f.value;this.backdropElement.style[y]!==o[y]&&this.renderer.setStyle(this.backdropElement,y,o[y])}}catch(g){i={error:g}}finally{try{f&&!f.done&&(r=v["return"])&&r.call(v)}finally{if(i)throw i.error}}},e.decorators=[{type:c.Injectable}],e.ctorParameters=function(){return[{type:c.RendererFactory2}]},e}(),A=function(){function e(e,t,n,i,r,o,s,a){this.elementRef=e,this.componentFactoryResolver=t,this.injector=n,this.renderer=i,this.viewContainer=r,this.resolver=o,this.tourService=s,this.tourBackdrop=a,this.enableRippleEffect=!1,this.allowInteractions=!1}return e.prototype.ngOnInit=function(){var e=this.resolver.resolveComponentFactory(I),t=this.viewContainer.createComponent(e);this.tourStep=t.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),t.location.nativeElement),this.tourStep.setOverlayOrigin(this),this.tourService.register(this.tourAnchor,this)},e.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},e.prototype.showTourStep=function(e){var t=this;if(this.isActive=!0,this.tourStep.step=e,this.tourStep.nzPlacement=e.placement,this.tourStep.stepTemplate=e.stepTemplate,e.preventScrolling||(s(this.elementRef.nativeElement,{sides:"bottom"})?s(this.elementRef.nativeElement,{sides:"left top right"})||this.elementRef.nativeElement.scrollIntoView(!0):this.elementRef.nativeElement.scrollIntoView(!1)),this.enableRippleEffect=e.enableRippleEffect,this.allowInteractions=e.allowInteractions,e.nextOn){this.allowInteractions=!0;var n=function(){t.elementRef.nativeElement.removeEventListener(e.nextOn,n),t.tourService.next()};this.elementRef.nativeElement.addEventListener(e.nextOn,n)}if(this.tourStep.show(),e.disableBackdrop?this.tourBackdrop.close():this.tourBackdrop.show(this.elementRef,e.backdropRadius,e.backdropColor),e.enableRippleEffect){var i=e.rippleColor?e.rippleColor:"rgba(0, 0, 0, 0.7)";this.elementRef.nativeElement.style.boxShadow=i+" 0px 0px 0px 100vw"}e.prevBtnTitle=e.prevBtnTitle||"Prev",e.nextBtnTitle=e.nextBtnTitle||"Next",e.endBtnTitle=e.endBtnTitle||"End",this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.menuCloseSubscription=this.tourStep.closed$.pipe(a.first()).subscribe(function(){t.tourService.getStatus()!==_.OFF&&(t.tourService.end(),t.tourBackdrop.close())})},e.prototype.hideTourStep=function(){this.isActive=!1,this.enableRippleEffect&&(this.elementRef.nativeElement.style.boxShadow="none"),this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.tourStep.hide(),this.tourService.getStatus()===_.OFF&&this.tourBackdrop.close()},e.decorators=[{type:c.Directive,args:[{selector:"[tourAnchor]"}]}],e.ctorParameters=function(){return[{type:c.ElementRef},{type:c.ComponentFactoryResolver},{type:c.Injector},{type:c.Renderer2},{type:c.ViewContainerRef},{type:c.ComponentFactoryResolver},{type:V},{type:$}]},e.propDecorators={tourAnchor:[{type:c.Input}],isActive:[{type:c.HostBinding,args:["class.touranchor--is-active"]}],enableRippleEffect:[{type:c.HostBinding,args:["class.ripple-effect"]}],allowInteractions:[{type:c.HostBinding,args:["class.allow-interactions"]}]},e}(),D=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{declarations:[O,z],exports:[O,z],imports:[l.CommonModule,p.OverlayModule,R],entryComponents:[O]}]}],e}(),B=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[$,V]}},e.decorators=[{type:c.NgModule,args:[{declarations:[A,I],entryComponents:[I],exports:[A],imports:[l.CommonModule,p.OverlayModule,P,D]}]}],e}();e.NgxAppTour=B,e.TourService=V,e.TourState=_,e.TourAnchorDirective=A,e.ɵb=I,e.ɵj=R,e.ɵl=k,e.ɵk=E,e.ɵd=v,e.ɵc=x,e.ɵf=x,e.ɵh=T,e.ɵe=P,e.ɵg=O,e.ɵi=z,e.ɵm=D,e.ɵa=$,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-app-tour.umd.min.js.map